(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9929:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return wt}});var n=r(4942),i=r(7294),o=r(7956),c=r(1120),a=r(7623),s=r(9702),u=r(282),l=r(7812),f=r(5477),d=r(7661),p=r(1594),b=r(7257),j=r(9905),y=r(9826),h=r(8428),O=function(e){var t=e.sheet,r=new URL("https://script.google.com/macros/s/AKfycbxKAbruh-ZodRk3bFjCLsElRnDntpLZc-w8EVHfm-S6R3YKW-vW8BPv5jA6v0syiXt6/exec");r.searchParams.append("s",t);return{endpoint:r.toString(),options:{mode:"cors"}}}({sheet:"teams"}),v=O.endpoint,g=O.options,m=function(){return fetch(v,g).then((function(e){return e.json()})).then((function(e){return e})).then((function(e){return function(e){if(0===e.status)throw new Error;return e.data}(e)}))},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{immediate:!1},t=e.immediate,r=(0,i.useState)(t),n=r[0],o=r[1],c=function(){return o(!0)},a=function(){return o(!1)};return{now:n,start:c,end:a}},w=r(5861),P=r(7757),Z=r.n(P),S=function(e){return new Promise((function(t){return setTimeout(t,e)}))},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=(0,o.Ds)(),r=t.enqueueSnackbar,n=t.closeSnackbar,i=function(){var t=(0,w.Z)(Z().mark((function t(i,o){var c;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r(i,{variant:o,anchorOrigin:{vertical:"top",horizontal:"left"}}),t.next=3,S(e);case 3:n(c);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),c=function(e){return i(e,"success")},a=function(e){return i(e,"error")};return{show:i,success:c,error:a}},E=function(e){var t=(0,i.useState)(0),r=t[0],n=t[1];return{activeStep:r,isStepCompleted:r===e,onNext:function(){return n((function(e){return e+1}))},onBack:function(){return n((function(e){return e-1}))},onReset:function(){return n(0)}}},k=r(1911),C=r(8463),T=r(1907),N=r(9912),I=r(4837),R=r(7239),A=r(428),L=r(8341),B=r(3776),_=r(6447),z=r(2318),U=r(3630),K=r(7484),M=r.n(K);function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G={endpoint:new URL("https://discord.com/api/webhooks/892816489508388915/Ng7r4M166Uw4ZSK95rQTvpYciHIL9VfKv3aRxKd9aVOPTyWtKmmNYFyBJcMjt9Fwy8-j").toString(),options:{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"}}},J=G.endpoint,V=G.options,W=function(e){return fetch(J,F(F({},V),{},{body:JSON.stringify({username:"\u307d\u3093\u305b",avatar_url:"http://kaomojich.com/wp-content/uploads/yaruo/yaruo_01.gif",content:e})}))},X={3:"\u4e09",4:"\u56db"},Y=r(2982),q=function(e){return{type:"SET",payload:{byId:e}}},Q=function(e){return{type:"UPDATE",payload:{byId:e}}};function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var te=function(e,t){switch(t.type){case"SET":return ee(ee({},e),{},{origin:ee({},t.payload.byId),byId:ee({},t.payload.byId)});case"UPDATE":return ee(ee({},e),{},{byId:ee(ee({},e.byId),t.payload.byId)});default:return e}},re=r(5893),ne={origin:{},byId:{}},ie=(0,i.createContext)({}),oe=function(e){var t=e.children,r=(0,i.useReducer)(te,ne),n=r[0],o=r[1];return(0,re.jsx)(ie.Provider,{value:{state:n,dispatch:o},children:t})};function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var se=function(e){var t=e.byId;return(0,i.useMemo)((function(){var e=Object.keys(t),r=e.map((function(e){return ae({},t[e])})),i=r.reduce((function(e,t){return e+t.users}),0),o=r.filter((function(e){return 0<e.users})),c=o.filter((function(e){return 0<e.dice})),a=Object.values((0,Y.Z)(o).sort((function(e,t){return e.dice-t.dice})).reduce((function(e,t){return ae(ae({},e),{},(0,n.Z)({},t.dice,[].concat((0,Y.Z)(e[t.dice]||[]),[t])))}),{})).map((function(e){return e.sort((function(e,t){return e.priority-t.priority}))})).flat(),s=function(e,t){return c.filter((function(t){return t.id!==e})).some((function(e){return e.dice===t}))},u=o.length===c.length,l=Object.values(c.filter((function(e){var t=e.id,r=e.dice;return s(t,r)})).reduce((function(e,t){return ae(ae({},e),{},(0,n.Z)({},t.dice,[].concat((0,Y.Z)(e[t.dice]||[]),[t])))}),{})).every((function(e){return e.every((function(t){var r=t.id,n=t.priority;return e.filter((function(e){return e.id!==r})).every((function(e){return e.priority!==n}))}))}));return{ids:e,byId:t,teams:r,entryTeams:o,sortedTeams:a,settedDiceTeams:c,allUsers:i,isAllSettedDice:u,isAllSettedPriority:l,isButtingDice:s}}),[t])};function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fe=function(e,t){return Array.from({length:t-e+1},(function(t,r){return e+r}))},de=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},n=Object.assign({},r(t)),i=function(){return Object.assign(n,JSON.parse(localStorage.getItem(e)))},o=function(t){Object.assign(n,r(t)),localStorage.setItem(e,JSON.stringify(n))};return{loadStorage:i,syncStorage:o}};function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var je=de("teams",ne.byId,(function(e){return Object.values(e).reduce((function(e,t){var r=t.id,i=t.users,o=t.priority,c=t.dice;return be(be({},e),{},(0,n.Z)({},r,{users:i,priority:o,dice:c}))}),{})})),ye=je.loadStorage,he=je.syncStorage,Oe=function(){var e=(0,i.useContext)(ie),t=e.state,r=e.dispatch;return be(be({},se(t)),{},{setTeams:function(e){var t=ye(),i=e.reduce((function(e,r){var i,o,c,a=r.id,s=r.name;return be(be({},e),{},(0,n.Z)({},a,{id:a,name:s,users:(null===(i=(t||{})[a])||void 0===i?void 0:i.users)||0,priority:(null===(o=(t||{})[a])||void 0===o?void 0:o.priority)||1,dice:(null===(c=(t||{})[a])||void 0===c?void 0:c.dice)||0}))}),{});r(q(i))},updateTeams:function(e){var t,i=Array.isArray(e)?e:[e],o=(t="id",i.reduce((function(e,r){return le(le({},e),{},(0,n.Z)({},r[t],r))}),{}));r(Q(o)),he(be({},o))}})},ve=function(e){return{type:"SET",payload:e}},ge=function(e){return{type:"UPDATE",payload:e}};function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var we=function(e,t){switch(t.type){case"SET":case"UPDATE":return xe(xe({},e),t.payload);default:return e}},Pe={priority:4},Ze=(0,i.createContext)({}),Se=function(e){var t=e.children,r=(0,i.useReducer)(we,Pe),n=r[0],o=r[1];return(0,re.jsx)(Ze.Provider,{value:{state:n,dispatch:o},children:t})},De=function(e){var t=e.priority;return(0,i.useMemo)((function(){return{priority:t}}),[t])};function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ce=de("settings",Pe),Te=Ce.loadStorage,Ne=Ce.syncStorage,Ie=function(){var e=(0,i.useContext)(Ze),t=e.state,r=e.dispatch;return ke(ke({},De(t)),{},{loadSettings:function(){var e=Te();r(ve(e))},updateSettings:function(e){r(ge(e)),Ne(e)}})},Re=r(5987),Ae=["tables"];function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _e=function(e,t){var r=t[4]+t[3],n=function(e){var t=Z().mark((function t(){var r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=0;case 1:return r++,t.next=5,r;case 5:e===r&&(r=0),t.next=1;break;case 8:case"end":return t.stop()}}),t)}))();return function(){return t.next().value}}(r);return e.map((function(e){var t=e.id,r=e.users;return{id:t,tables:(0,Y.Z)(new Array(r)).map(n).sort((function(e,t){return e-t}))}})).map((function(e){var n=e.tables;return Be(Be({},(0,Re.Z)(e,Ae)),{},{tables:{4:n.filter((function(e){return e<=t[4]})),3:n.filter((function(e){return t[4]<e&&e<=r}))}})}))},ze="------------------------------",Ue=function(){var e=Oe(),t=e.sortedTeams,r=e.byId,n=Ie().priority,o=(0,i.useMemo)((function(){var e=t.reduce((function(e,t){return e+t.users}),0),r=function(e,t){for(var r=[],n=0;n<=t;n+=4){var i=Math.round(n/4);0===n%4&&0===(t-i)%3&&r.push({4:n,3:t-n})}var o=r.length/2;return r[Number.isInteger(o)&&3===e?o-1:Math.floor(o)]}(n,e),i=!!r;if(!i)return{users:e,numbers:r,isCreatable:i,tables:{4:0,3:0},allocate:[]};var o,c={4:(o=r)[4]/4,3:o[3]/3};return{users:e,numbers:r,isCreatable:i,tables:c,allocate:_e(t,c)}}),[t]),c=o.users,a=o.numbers,s=o.isCreatable,u=o.tables,l=o.allocate;return{priority:n,users:c,numbers:a,tables:u,allocate:l,isCreatable:s,getCopyText:function(e){if(!s)throw new Error("".concat(c," \u5168\u54e1\u53c2\u52a0\u3067\u304d\u308b\u5353\u6570\u306e\u4f5c\u6210\u304c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002"));return[ze,"\u53c2\u52a0\u7dcf\u6570: ".concat(c,"\u4eba"),"\u512a\u5148\u4f5c\u6210\u5353: ".concat(X[n],"\u9ebb"),ze,"\u56db\u9ebb\u4eba\u6570: ".concat(a[4],"\u4eba"),"\u4e09\u9ebb\u4eba\u6570: ".concat(a[3],"\u4eba"),"".concat(u[4]>0?"\u56db\u9ebb\u5353: 1 ~ ".concat(u[4],"\u5353"):""),"".concat(u[3]>0?"\u4e09\u9ebb\u5353: ".concat(u[4]+1," ~ ").concat(u[4]+u[3],"\u5353"):""),ze].concat((0,Y.Z)(l.map((function(e){return["".concat(r[e.id].name,"\u30c1\u30fc\u30e0"),"\u30c0\u30a4\u30b9: ".concat(r[e.id].dice),e.tables[4].length&&"\u56db\u9ebb\u5353: ".concat(e.tables[4].join(", ")),e.tables[3].length&&"\u4e09\u9ebb\u5353: ".concat(e.tables[3].join(", ")),"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u679a\u6570: ".concat(e.tables[4].length+2*e.tables[3].length),ze]})).flat().filter(Boolean)),[e]).filter(Boolean).join("\n")}}},Ke=["second","minute","hour","day","month","year","date"],Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.useState)((function(){return M()()})),r=t[0],n=t[1],o=0===Object.keys(e).length;return(0,i.useEffect)((function(){var t=setInterval((function(){var t=M()();(o||Ke.every((function(r){return void 0===e[r]||t[r]()===e[r]})))&&n(t)}),1e3);return function(){return clearInterval(t)}}),[]),r},He=function(e,t){var r=Me(t);(0,i.useEffect)((function(){return e(r)}),[r])},Fe=function(e){var t=(0,i.useRef)();return(0,i.useEffect)((function(){t.current=e})),t.current},Ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,i.useCallback)((function(){return e()}),t),n=Fe(r);(0,i.useEffect)((function(){return n&&window.removeEventListener("resize",n),r(),window.addEventListener("resize",r),function(){return window.removeEventListener("resize",r)}}),[r])},Je=(0,k.Z)(z.Z)({fontSize:14}),Ve=(0,c.Z)((function(e){return{root:{width:"100%"},nest:{padding:e.spacing(1)},actions:{display:"flex",justifyContent:"space-between"}}})),We=function(e){var t=e.onReset,r=Ve(),n=Ue(),o=n.priority,c=n.users,a=n.numbers,s=n.tables,f=n.allocate,d=n.getCopyText,p=D(),b=Oe().byId,j=(0,i.useState)("00"),y=j[0],h=j[1],O=(0,i.useState)(!1),v=O[0],g=O[1],m=(0,i.useState)(!1),x=m[0],w=m[1],P=(0,i.useState)(!1),Z=P[0],S=P[1],E=function(){w(!1),S(!0),W(d(M()().format("HH:mm"))).then((function(){return p.success("\u9001\u4fe1\u3057\u307e\u3057\u305f")})).catch((function(){return p.error("\u9001\u4fe1\u30a8\u30e9\u30fc")}))};return He((function(e){h(e.add(1,"h").format("HH")),x&&E()}),{minute:0,second:0}),Ge((function(){g(!(0,U.Z)().any)})),(0,re.jsxs)(C.Z,{className:r.root,variant:"outlined",children:[(0,re.jsxs)(N.Z,{children:[(0,re.jsx)(Je,{color:"primary",gutterBottom:!0,children:"\u57fa\u672c\u60c5\u5831"}),(0,re.jsxs)(Je,{variant:"body2",children:["\u53c2\u52a0\u7dcf\u6570: ",c,"\u4eba"]}),(0,re.jsxs)(Je,{variant:"body2",children:["\u512a\u5148\u4f5c\u6210\u5353: ",X[o],"\u9ebb"]}),(0,re.jsxs)(Je,{variant:"body2",children:["\u56db\u9ebb\u4eba\u6570: ",a[4],"\u4eba"]}),(0,re.jsxs)(Je,{variant:"body2",children:["\u4e09\u9ebb\u4eba\u6570: ",a[3],"\u4eba"]})]}),(0,re.jsxs)(N.Z,{children:[(0,re.jsx)(Je,{color:"primary",gutterBottom:!0,children:"\u5353\u60c5\u5831"}),0<s[4]&&(0,re.jsxs)(Je,{variant:"body2",children:["\u56db\u9ebb\u5353: 1 ~ ",s[4],"\u5353"]}),0<s[3]&&(0,re.jsxs)(Je,{variant:"body2",children:["\u4e09\u9ebb\u5353: ",s[4]+1," ~ ",s[4]+s[3],"\u5353"]})]}),(0,re.jsxs)(N.Z,{children:[(0,re.jsx)(Je,{color:"primary",gutterBottom:!0,children:"\u30c1\u30fc\u30e0\u60c5\u5831"}),f.map((function(e){var t=e.id,n=e.tables;return(0,re.jsxs)(N.Z,{className:r.nest,children:[(0,re.jsxs)(Je,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:[b[t].name,"\u30c1\u30fc\u30e0"]}),(0,re.jsxs)(Je,{variant:"body2",children:["\u30c0\u30a4\u30b9: ",b[t].dice]}),0<n[4].length&&(0,re.jsxs)(Je,{variant:"body2",children:["\u56db\u9ebb\u5353: ",n[4].join(", ")]}),0<n[3].length&&(0,re.jsxs)(Je,{variant:"body2",children:["\u4e09\u9ebb\u5353: ",n[3].join(", ")]}),(0,re.jsxs)(Je,{variant:"body2",children:["\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u679a\u6570: ",n[4].length+2*n[3].length]})]},t)}))]}),(0,re.jsxs)(T.Z,{className:r.actions,children:[(0,re.jsx)(_.ZP,{placement:"top",title:"\u53c2\u52a0\u30c1\u30fc\u30e0\u30fc\u8a2d\u5b9a\u306b\u623b\u308a\u307e\u3059\u3002\u81ea\u52d5\u9001\u4fe1\u4e88\u7d04\u3092\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3059\u3002",children:(0,re.jsx)(l.Z,{onClick:function(){w(!1),S(!1),t()},children:(0,re.jsx)(A.Z,{})})}),(0,re.jsxs)(I.Z,{variant:"contained",color:"primary","aria-label":"outlined primary button group",children:[(0,re.jsx)(_.ZP,{placement:"top",title:"\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306b\u30c6\u30ad\u30b9\u30c8\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002",children:(0,re.jsx)(u.Z,{onClick:function(){try{if(!navigator.clipboard)throw new Error("\u304a\u4f7f\u3044\u306e\u30d6\u30e9\u30a6\u30b6\u306b\u306f\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u6a5f\u80fd\u304c\u3042\u308a\u307e\u305b\u3093\u3002");navigator.clipboard.writeText(d()),p.success("\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f")}catch(e){p.error(e.message)}},children:(0,re.jsx)(R.Z,{})})}),v&&(0,re.jsx)(_.ZP,{placement:"top",title:"\u62bc\u4e0b\u3059\u308b\u3068\u3001\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u3092\u8868\u793a\u3057\u3066\u3044\u308b\u9593 ".concat(y,":00 \u306b\u30c6\u30ad\u30b9\u30c8\u3092\u81ea\u52d5\u9001\u4fe1\u3057\u307e\u3059\u3002"),children:(0,re.jsx)(u.Z,{disabled:Z||x,onClick:function(){w(!0),p.success("\u9001\u4fe1\u4e88\u7d04\u3092\u3057\u307e\u3057\u305f")},children:(0,re.jsx)(B.Z,{})})}),(0,re.jsx)(_.ZP,{placement:"top",title:"Discord\u306b\u30c6\u30ad\u30b9\u30c8\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002",children:(0,re.jsx)(u.Z,{disabled:Z,onClick:E,children:(0,re.jsx)(L.Z,{})})})]})]})]})},Xe=r(5258),Ye=r(8358),qe=(0,c.Z)((function(e){return(0,a.Z)({root:{flexGrow:1},title:{flexGrow:1}})})),Qe=function(){var e=qe();return(0,re.jsx)("div",{className:e.root,children:(0,re.jsx)(Xe.Z,{position:"static",children:(0,re.jsx)(Ye.Z,{children:(0,re.jsx)(z.Z,{variant:"h6",className:e.title,children:"\u56e3\u4f53\u6226\u5353Generator"})})})})},$e=r(6394),et=r(6479),tt=r(4436),rt=r(602);function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ot=(0,c.Z)((function(e){return(0,a.Z)({root:{width:"100%",display:"grid",gridRowGap:e.spacing(2)},row:{width:"100%",display:"grid",gridAutoFlow:"column",gridTemplateColumns:"1fr max-content"},priority:{width:"60px",marginLeft:e.spacing(2)}})})),ct=fe(6,36),at=function(){var e=ot(),t=Oe(),r=t.byId,n=t.entryTeams,i=t.settedDiceTeams,o=t.isButtingDice,c=t.updateTeams,a=n.map((function(e){var t=e.id;return{id:t,name:e.name,dice:e.dice,priority:e.priority,diceLabelId:"dice-label-".concat(t),priorityLabelId:"priority-label-".concat(t)}})),s=function(e){return function(t){c(it(it({},r[e]),{},{dice:t.target.value}))}},u=function(e){return function(t){c(it(it({},r[e]),{},{priority:t.target.value}))}};return(0,re.jsx)("div",{className:e.root,children:a.map((function(t){var r,n,c=t.id,a=t.name,l=t.dice,f=t.priority,d=t.diceLabelId,p=t.priorityLabelId;return(0,re.jsxs)("div",{className:e.row,children:[(0,re.jsxs)(tt.Z,{children:[(0,re.jsxs)($e.Z,{id:d,children:[a,"\u30c1\u30fc\u30e0"]}),(0,re.jsxs)(rt.Z,{labelId:d,value:l,onChange:s(c),children:[(0,re.jsx)(et.Z,{value:0,children:"\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"}),ct.map((function(e){return(0,re.jsx)(et.Z,{value:e,children:e},e)}))]})]}),o(c,l)&&(0,re.jsxs)(tt.Z,{className:e.priority,children:[(0,re.jsx)($e.Z,{id:p,children:"\u914d\u5c5e\u9806"}),(0,re.jsx)(rt.Z,{labelId:p,value:f,onChange:u(c),children:(r=c,n=l,fe(1,i.filter((function(e){return e.id!==r})).reduce((function(e,t){return e+(t.dice===n?1:0)}),1))).map((function(e){return(0,re.jsx)(et.Z,{value:e,children:e},e)}))})]})]},c)}))})},st=r(1846),ut=r(7162),lt=r(553),ft=r(6019),dt=(0,c.Z)((function(e){return(0,a.Z)({root:{width:"100%"}})})),pt=function(){var e=dt(),t=Ie(),r=t.priority,n=t.updateSettings;return(0,re.jsxs)(tt.Z,{component:"fieldset",className:e.root,children:[(0,re.jsx)(ft.Z,{component:"legend",children:"\u512a\u5148\u5353"}),(0,re.jsxs)(ut.Z,{"aria-label":"priority",name:"priority",value:r,onChange:function(e){var t=e.target.value;n({priority:+t})},children:[(0,re.jsx)(lt.Z,{value:3,control:(0,re.jsx)(st.Z,{}),label:"\u4e09\u9ebb"}),(0,re.jsx)(lt.Z,{value:4,control:(0,re.jsx)(st.Z,{}),label:"\u56db\u9ebb"})]})]})},bt=r(8286);function jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ht=(0,c.Z)((function(e){return(0,a.Z)({root:{width:"100%",display:"grid",gridRowGap:e.spacing(1)}})})),Ot=function(){var e=ht(),t=Oe(),r=t.teams,n=t.byId,i=t.updateTeams,o=function(e){return function(t){var r=n[e];t.currentTarget.setSelectionRange(0,String(r.users).length)}},c=function(e){return function(t){var r=+t.currentTarget.value;i(yt(yt({},n[e]),{},{users:Number.isInteger(r)?r:0}))}};return(0,re.jsx)("div",{className:e.root,children:r.map((function(e,t){var r=e.id,n=e.name,i=e.users;return(0,re.jsx)(bt.Z,{type:"tel",label:"".concat(n,"\u30c1\u30fc\u30e0"),value:i,onFocus:o(r),onChange:c(r)},t)}))})};function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var mt=(0,c.Z)((function(e){return(0,a.Z)({root:{width:"100%"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},title:{marginTop:e.spacing(3),marginLeft:e.spacing(3)},actionsContainer:{display:"flex",justifyContent:"space-between",flexDirection:"row-reverse",marginTop:e.spacing(2)},optionsContainer:{display:"flex",justifyContent:"space-between",marginRight:-e.spacing(1.2),marginBottom:e.spacing(1.5),marginLeft:-e.spacing(2)},resetContainer:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingBottom:e.spacing(3)}})})),xt=function(){var e=mt(),t=D(),r=x({immediate:!0}),n=E(4),o=n.activeStep,c=n.onNext,a=n.onBack,O=n.onReset,v=Oe(),g=v.teams,w=v.entryTeams,P=v.isAllSettedDice,Z=v.isAllSettedPriority,S=v.setTeams,k=v.updateTeams,C=Ie().loadSettings;(0,i.useEffect)((function(){C(),m().then((function(e){return S(e)})).catch((function(){return t.error("\u30c7\u30fc\u30bf\u53d6\u5f97\u30a8\u30e9\u30fc")})).finally((function(){return r.end()}))}),[]);return(0,re.jsxs)("div",{className:e.root,children:[(0,re.jsx)(s.Z,{className:e.backdrop,open:r.now,children:(0,re.jsx)(f.Z,{color:"inherit"})}),(0,re.jsx)(Qe,{}),(0,re.jsxs)(d.Z,{activeStep:o,orientation:"vertical",children:[(0,re.jsxs)(p.Z,{children:[(0,re.jsx)(b.Z,{children:"\u53c2\u52a0\u30c1\u30fc\u30e0\u8a2d\u5b9a"}),(0,re.jsxs)(j.Z,{children:[(0,re.jsxs)("div",{className:e.optionsContainer,children:[(0,re.jsx)("div",{}),(0,re.jsx)(l.Z,{"aria-label":"delete",onClick:function(){k(g.map((function(e){return gt(gt({},e),{},{users:0})})))},children:(0,re.jsx)(h.Z,{fontSize:"small"})})]}),(0,re.jsx)(Ot,{}),(0,re.jsx)("div",{className:e.actionsContainer,children:(0,re.jsx)(u.Z,{variant:"contained",color:"primary",disabled:w.length<2,onClick:c,children:"\u6b21\u3078"})})]})]}),(0,re.jsxs)(p.Z,{children:[(0,re.jsx)(b.Z,{children:"\u30c0\u30a4\u30b9\u5024\u8a2d\u5b9a"}),(0,re.jsxs)(j.Z,{children:[(0,re.jsxs)("div",{className:e.optionsContainer,children:[(0,re.jsx)(l.Z,{"aria-label":"back",onClick:a,children:(0,re.jsx)(y.Z,{fontSize:"small"})}),(0,re.jsx)(l.Z,{"aria-label":"delete",onClick:function(){k(g.map((function(e){return gt(gt({},e),{},{dice:0,priority:1})})))},children:(0,re.jsx)(h.Z,{fontSize:"small"})})]}),(0,re.jsx)(at,{}),(0,re.jsx)("div",{className:e.actionsContainer,children:(0,re.jsx)(u.Z,{variant:"contained",color:"primary",disabled:!P||!Z,onClick:c,children:"\u6b21\u3078"})})]})]}),(0,re.jsxs)(p.Z,{children:[(0,re.jsx)(b.Z,{children:"\u8a73\u7d30\u8a2d\u5b9a"}),(0,re.jsxs)(j.Z,{children:[(0,re.jsx)("div",{className:e.optionsContainer,children:(0,re.jsx)(l.Z,{"aria-label":"back",onClick:a,children:(0,re.jsx)(y.Z,{fontSize:"small"})})}),(0,re.jsx)(pt,{}),(0,re.jsx)("div",{className:e.actionsContainer,children:(0,re.jsx)(u.Z,{variant:"contained",color:"primary",onClick:c,children:"\u6b21\u3078"})})]})]}),(0,re.jsxs)(p.Z,{children:[(0,re.jsx)(b.Z,{children:"\u4f5c\u6210\u7d50\u679c"}),(0,re.jsx)(j.Z,{children:(0,re.jsx)(We,{onReset:O})})]})]})]})},wt=function(){return(0,re.jsx)(o.wT,{maxSnack:1,children:(0,re.jsx)(Se,{children:(0,re.jsx)(oe,{children:(0,re.jsx)(xt,{})})})})}},5301:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(9929)}])}},function(e){e.O(0,[30,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);